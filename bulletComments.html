<!DOCTYPE HTML>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>弹幕测试</title>
    <script src="bulletComments.js"></script>
    <script>
        let bulletComment;
        window.onload = function(){
            bulletComments = new BulletComments(document.getElementById('bulletCommentsDiv'));
            loadData(bulletComments);
            setInterval(showDebugInfo, 500);
        }
        let loadData = function(bulletComments){
            let _startTime = 5000;
            for (let i = 0; i < 10000; i++){
                if (Math.random() > 0.6)
                    bulletComments.addBulletComment({
                        text: "这是一个长长长长长长长长长长长长长长长长长长长长长长长长的测试(^_^)",
                        speed: 0.15 + Math.random() / 90,
                        size: 25,
                        color: 'white',
                        borderCorol: 'black',
                        rightToLeft: (Math.random() > 0.4),
                        startTime: _startTime
                    });
                else
                    bulletComments.addBulletComment({
                        text: "橘里橘气",
                        speed: 0.1 + Math.random() / 90,
                        size: 24,
                        color: '#FFCC66',
                        borderCorol: '#FF9933',
                        rightToLeft: (Math.random() > 0.4),
                        startTime: _startTime
                    });
                _startTime += parseInt(Math.random() * 500);
            }
        }
        let showDebugInfo = function() {
            let debugInfo = bulletComments.getDebugInfo();
            document.getElementById("time").innerText = debugInfo.time.toString();
            document.getElementById("delay").innerText = debugInfo.delay.toString();
            document.getElementById("timeOut").innerText = debugInfo.timeOut.toString();
            document.getElementById("bulletCommentsOnScreenCount").innerText = debugInfo.bulletCommentsOnScreenCount.toString();
            document.getElementById("bulletCommentsCount").innerText = debugInfo.bulletCommentsCount.toString();
            document.getElementById("delayBulletCommentsCount").innerText = debugInfo.delayBulletCommentsCount.toString();
            document.getElementById("timeOutBulletCommentsCount").innerText = debugInfo.timeOutBulletCommentsCount.toString();
        }
    </script>
</head>

<body>
    <div style="width:800px;height:450px;">
        <div style="width:100%;height:100%;background-color: black;"></div>
        <div id="bulletCommentsDiv" width="800" height="450" style="width:800px;height:450px;position:relative;left:0;top:-450px;z-index:1000;"></div>
    </div>
    <p>时间：<b id="time"></b></p>
    <p>实时弹幕条数：<b id="bulletCommentsOnScreenCount"></b> 剩余弹幕条数：<b id="bulletCommentsCount"></b></p>
    <p>延迟：<b id="delay"></b>ms 延迟丢弃丢弃弹幕数：<b id="delayBulletCommentsCount"></b></p>
    <p>超时：<b id="timeOut"></b>ms 超时丢弃丢弃弹幕数：<b id="timeOutBulletCommentsCount"></b></p>
    <a href="#" onclick="bulletComments.play();">开始</a>&nbsp;<a href="#" onclick="bulletComments.pause();">暂停</a>&nbsp;
    <a href="#" onclick="bulletComments.option.playSpeed = 1;">1倍速</a>&nbsp;<a href="#" onclick="bulletComments.option.playSpeed = 1.5;">1.5倍数</a>&nbsp;
    <a href="#" onclick="bulletComments.option.playSpeed = 2;">2倍速</a>&nbsp;<a href="#" onclick="bulletComments.option.playSpeed = 2.5;">2.5倍数</a>&nbsp;
</body>
</html>