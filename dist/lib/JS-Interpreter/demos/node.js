"use strict";

require("core-js/modules/web.timers");

global.acorn = require('../acorn');

var JSInterpreter = require('../interpreter');

var myCode = "\nvar result = [];\nfunction fibonacci(n, output) {\n  var a = 1, b = 1, sum;\n  for (var i = 0; i < n; i++) {\n    output.push(a);\n    sum = a + b;\n    a = b;\n    b = sum;\n  }\n}\nfibonacci(16, result);\nalert(result.join(', '));\n";

var initFunc = function initFunc(interpreter, scope) {
  var wrapper = function wrapper(text) {
    console.log(text);
  };

  interpreter.setProperty(scope, 'alert', interpreter.createNativeFunction(wrapper));
};

var myInterpreter = new JSInterpreter.Interpreter(myCode, initFunc);

var runToCompletion = function runToCompletion() {
  if (myInterpreter.run()) {
    setTimeout(runToCompletion, 10);
  }
};

runToCompletion();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9KUy1JbnRlcnByZXRlci9kZW1vcy9ub2RlLmpzIl0sIm5hbWVzIjpbImdsb2JhbCIsImFjb3JuIiwicmVxdWlyZSIsIkpTSW50ZXJwcmV0ZXIiLCJteUNvZGUiLCJpbml0RnVuYyIsImludGVycHJldGVyIiwic2NvcGUiLCJ3cmFwcGVyIiwidGV4dCIsImNvbnNvbGUiLCJsb2ciLCJzZXRQcm9wZXJ0eSIsImNyZWF0ZU5hdGl2ZUZ1bmN0aW9uIiwibXlJbnRlcnByZXRlciIsIkludGVycHJldGVyIiwicnVuVG9Db21wbGV0aW9uIiwicnVuIiwic2V0VGltZW91dCJdLCJtYXBwaW5ncyI6Ijs7OztBQUNBQSxNQUFNLENBQUNDLEtBQVAsR0FBZUMsT0FBTyxDQUFDLFVBQUQsQ0FBdEI7O0FBQ0EsSUFBTUMsYUFBYSxHQUFHRCxPQUFPLENBQUMsZ0JBQUQsQ0FBN0I7O0FBRUEsSUFBSUUsTUFBTSxpUEFBVjs7QUFnQkEsSUFBSUMsUUFBUSxHQUFHLFNBQVhBLFFBQVcsQ0FBU0MsV0FBVCxFQUFzQkMsS0FBdEIsRUFBNkI7QUFDMUMsTUFBSUMsT0FBTyxHQUFHLFNBQVZBLE9BQVUsQ0FBU0MsSUFBVCxFQUFlO0FBQzNCQyxJQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWUYsSUFBWjtBQUNELEdBRkQ7O0FBR0FILEVBQUFBLFdBQVcsQ0FBQ00sV0FBWixDQUF3QkwsS0FBeEIsRUFBK0IsT0FBL0IsRUFDSUQsV0FBVyxDQUFDTyxvQkFBWixDQUFpQ0wsT0FBakMsQ0FESjtBQUVELENBTkQ7O0FBUUEsSUFBSU0sYUFBYSxHQUFHLElBQUlYLGFBQWEsQ0FBQ1ksV0FBbEIsQ0FBOEJYLE1BQTlCLEVBQXNDQyxRQUF0QyxDQUFwQjs7QUFFQSxJQUFJVyxlQUFlLEdBQUcsU0FBbEJBLGVBQWtCLEdBQVc7QUFDL0IsTUFBSUYsYUFBYSxDQUFDRyxHQUFkLEVBQUosRUFBeUI7QUFHdkJDLElBQUFBLFVBQVUsQ0FBQ0YsZUFBRCxFQUFrQixFQUFsQixDQUFWO0FBQ0Q7QUFDRixDQU5EOztBQU9BQSxlQUFlIiwic291cmNlc0NvbnRlbnQiOlsiLy8gTWluaW1hbCB0ZXN0IG9mIEpTLUludGVycHJldGVyIGluIE5vZGUuXG5nbG9iYWwuYWNvcm4gPSByZXF1aXJlKCcuLi9hY29ybicpO1xuY29uc3QgSlNJbnRlcnByZXRlciA9IHJlcXVpcmUoJy4uL2ludGVycHJldGVyJyk7XG5cbnZhciBteUNvZGUgPSBgXG52YXIgcmVzdWx0ID0gW107XG5mdW5jdGlvbiBmaWJvbmFjY2kobiwgb3V0cHV0KSB7XG4gIHZhciBhID0gMSwgYiA9IDEsIHN1bTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICBvdXRwdXQucHVzaChhKTtcbiAgICBzdW0gPSBhICsgYjtcbiAgICBhID0gYjtcbiAgICBiID0gc3VtO1xuICB9XG59XG5maWJvbmFjY2koMTYsIHJlc3VsdCk7XG5hbGVydChyZXN1bHQuam9pbignLCAnKSk7XG5gO1xuXG4vLyBTZXQgdXAgJ2FsZXJ0JyBhcyBhbiBpbnRlcmZhY2UgdG8gTm9kZSdzIGNvbnNvbGUubG9nLlxudmFyIGluaXRGdW5jID0gZnVuY3Rpb24oaW50ZXJwcmV0ZXIsIHNjb3BlKSB7XG4gIHZhciB3cmFwcGVyID0gZnVuY3Rpb24odGV4dCkge1xuICAgIGNvbnNvbGUubG9nKHRleHQpO1xuICB9O1xuICBpbnRlcnByZXRlci5zZXRQcm9wZXJ0eShzY29wZSwgJ2FsZXJ0JyxcbiAgICAgIGludGVycHJldGVyLmNyZWF0ZU5hdGl2ZUZ1bmN0aW9uKHdyYXBwZXIpKTtcbn07XG5cbnZhciBteUludGVycHJldGVyID0gbmV3IEpTSW50ZXJwcmV0ZXIuSW50ZXJwcmV0ZXIobXlDb2RlLCBpbml0RnVuYyk7XG5cbnZhciBydW5Ub0NvbXBsZXRpb24gPSBmdW5jdGlvbigpIHtcbiAgaWYgKG15SW50ZXJwcmV0ZXIucnVuKCkpIHtcbiAgICAvLyBSYW4gdW50aWwgYW4gYXN5bmMgY2FsbC4gIEdpdmUgdGhpcyBjYWxsIGEgY2hhbmNlIHRvIHJ1bi5cbiAgICAvLyBUaGVuIHN0YXJ0IHJ1bm5pbmcgYWdhaW4gbGF0ZXIuXG4gICAgc2V0VGltZW91dChydW5Ub0NvbXBsZXRpb24sIDEwKTtcbiAgfVxufTtcbnJ1blRvQ29tcGxldGlvbigpO1xuIl0sImZpbGUiOiJsaWIvSlMtSW50ZXJwcmV0ZXIvZGVtb3Mvbm9kZS5qcyJ9
