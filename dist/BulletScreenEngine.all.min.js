!function o(l,a,c){function s(t,e){if(!a[t]){if(!l[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var r=a[t]={exports:{}};l[t][0].call(r.exports,function(e){return s(l[t][1][e]||e)},r,r.exports,o,l,a,c)}return a[t].exports}for(var u="function"==typeof require&&require,e=0;e<c.length;e++)s(c[e]);return s}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.BulletScreenEngine=void 0;var _=e("./linkedList"),B=e("./version");n.BulletScreenEngine=function(e,h){var t,n,i,r,p,v,f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"canvas",o=0,a=new _.LinkedList,g=new _.LinkedList,c=0,x=0,s=.06,l=!1;(h=d(h,{})).verticalInterval=d(h.verticalInterval,8),h.playSpeed=d(h.playSpeed,1),h.clock=d(h.clock,function(e){return(new Date).getTime()-t}),h.shadowBlur=d(h.shadowBlur,2),h.scaling=d(h.scaling,1),h.timeOutDiscard=d(h.timeOutDiscard,!0),h.fontWeight=d(h.fontWeight,600),h.fontFamily=d(h.fontFamily,"sans-serif"),this.option=h;var y=e.clientWidth,u=e.clientHeight;function d(e,t){return void 0===e?t:"number"==typeof e&&isNaN(e)?t:null==e?t:e}function m(){var l,e=(new Date).getTime();null!=i&&(s=1/(e-i)),i=e,function(){0==g.getLength()&&(x=0);var e=.02<s?Math.ceil(1/s):1;do{var t=a.pop(!1,!1);if(null==t)return;var n=h.clock();if(t.startTime>n)return;!h.timeOutDiscard||!t.canDiscard||t.startTime>n-1/s*1.5?S(n,t):c++,a.pop(!0,!1),e--}while(0==g.getLength()||0<e)}(),g.forEach(function(e){var t=h.clock();switch(e.BulletScreen.type){case 0:if(!(e.x>-e.width))return"css3"===f&&p.removeChild(e.element),{remove:!0};e.x-=e.BulletScreen.speed*h.playSpeed/s;break;case 1:if(!(e.x<y))return"css3"===f&&p.removeChild(e.element),{remove:!0};e.x+=e.BulletScreen.speed*h.playSpeed/s;break;case 2:case 3:if(e.endTime<t)return"css3"===f&&p.removeChild(e.element),{remove:!0}}},!0),"css3"===f?g.forEach(function(e){e.element.style.transform="translate("+(e.x-4)+"px,"+(e.actualY-4)+"px)"},!0):"canvas"===f?function(){var e=document.createElement("canvas");e.width=r.width,e.height=r.height;var t=e.getContext("2d");g.forEach(function(e){t.drawImage(e.hideCanvas,e.x-4,e.actualY-4)},!0);var n=r.getContext("2d");n.clearRect(0,0,y,u),n.drawImage(e,0,0)}():"webgl"===f&&((l=v.webglContext).clear(l.COLOR_BUFFER_BIT),g.forEach(function(e){var t=e.x-4,n=t+e.width+8,i=e.actualY-4,r=i+e.height+8;l.bindTexture(l.TEXTURE_2D,e.texture2D);var o=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,o),l.enableVertexAttribArray(v.positionAttributeLocation),l.vertexAttribPointer(v.positionAttributeLocation,2,l.FLOAT,!1,0,0),l.bufferData(l.ARRAY_BUFFER,new Float32Array([t,i,n,i,t,r,t,r,n,i,n,r]),l.STATIC_DRAW),l.drawArrays(l.TRIANGLES,0,6)},!0)),n&&requestAnimationFrame(m)}function T(e){var t=document.createElement("canvas");t.width=e.width+8,t.height=e.height+8;var n=t.getContext("2d");return n.textBaseline="top",n.shadowColor="black",n.font=h.fontWeight+" "+e.size.toString()+"px "+h.fontFamily,null!=e.BulletScreen.color&&(n.shadowBlur=h.shadowBlur+.5,n.fillStyle=e.BulletScreen.color,n.fillText(e.BulletScreen.text,4,4)),null!=e.BulletScreen.borderColor&&(n.shadowBlur=0,n.lineWidth=.5,n.strokeStyle=e.BulletScreen.borderColor,n.strokeText(e.BulletScreen.text,4,4)),null!=e.BulletScreen.boxColor&&(n.shadowBlur=0,n.lineWidth=2,n.strokeStyle=e.BulletScreen.boxColor,n.strokeRect(0,0,e.width+8,e.height+8)),t}function S(n,t){x=n-t.startTime;var e,i,r,o,l,a,c={};if(c.BulletScreen=t,c.startTime=n,c.size=c.BulletScreen.size*h.scaling,c.height=c.size,"css3"===f)c.element=(l=(o=c).BulletScreen,(a=document.createElement("div")).className="BulletScreenDiv",a.setAttribute("data-uuid",l.uuid),a.style.position="absolute",a.style.webkitUserSelect="none",a.style.whiteSpace="nowrap",a.style.fontWeight=h.fontWeight,a.style.fontSize=o.size.toString()+"px",a.style.fontFamily=h.fontFamily,a.style.lineHeight=o.size.toString()+"px",a.style.padding="3px",a.style.textShadow="0 0 "+h.shadowBlur.toString()+"px black",null==l.color?a.style.color="rgba(0,0,0,0)":a.style.color=l.color,null!=l.borderColor&&(a.style.webkitTextStroke="0.5px",a.style.webkitTextStrokeColor=l.borderColor),null!=l.boxColor&&(a.style.border="1px solid",a.style.borderColor=l.boxColor),a.innerText=l.text,p.appendChild(a),a),c.width=c.element.clientWidth-8;else if("canvas"===f||"webgl"===f){var s=document.createElement("canvas").getContext("2d");s.font=h.fontWeight+" "+c.size.toString()+"px "+h.fontFamily,c.width=s.measureText(t.text).width,"canvas"===f?c.hideCanvas=T(c):c.texture2D=(e=T(c),i=v.webglContext,r=i.createTexture(),i.bindTexture(i.TEXTURE_2D,r),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,e),r)}switch(c.endTime=parseInt(n+(y+c.width)/(t.speed*h.playSpeed)),t.type){case 0:c.endTime=parseInt(n+(y+c.width)/(t.speed*h.playSpeed)),c.x=y,c.y=h.verticalInterval;break;case 1:c.endTime=parseInt(n+(y+c.width)/(t.speed*h.playSpeed)),c.x=-c.width,c.y=h.verticalInterval;break;case 2:c.endTime=c.startTime+t.residenceTime,c.x=parseInt((y-c.width)/2),c.y=h.verticalInterval;break;case 3:c.endTime=c.startTime+t.residenceTime,c.x=parseInt((y-c.width)/2),c.y=-h.verticalInterval-c.height}var u=g.getLength();if(1<t.type)g.forEach(function(e){if(e.BulletScreen.type==t.type)if(2==t.type){if(c.y+c.height<e.y)return{add:{addToUp:!0,element:w(c)},stop:!0};e.endTime<n?c.y=e.y:c.y=e.y+e.height+h.verticalInterval}else{if(c.y>e.y+e.height)return{add:{addToUp:!0,element:w(c)},stop:!0};e.endTime<n?c.y=e.y:c.y=e.y-c.height-h.verticalInterval}},!0);else{var d=c.width/(c.BulletScreen.speed*h.playSpeed);g.forEach(function(e){if(!(1<e.BulletScreen.type)){if(c.y+c.height<e.y)return{add:{addToUp:!0,element:w(c)},stop:!0};var t=e.width/(e.BulletScreen.speed*h.playSpeed);e.startTime+t>=n||e.endTime>=c.endTime-d?c.y=e.y+e.height+h.verticalInterval:c.y=e.y}},!0)}g.getLength()==u&&g.push(w(c),!1)}function w(e){var t=e.BulletScreen;return t.type<3?e.actualY=e.y%(u-e.height):3==t.type&&(e.actualY=u+e.y%u),e}function E(e){var t=document.createElement("canvas");return t.style.width=e.clientWidth+"px",t.style.height=e.clientHeight+"px",t.width=e.clientWidth,t.height=e.clientHeight,e.innerHTML="",e.appendChild(t),t}function b(e){var t=document.createElement("div");return t.style.width=e.clientWidth+"px",t.style.height=e.clientHeight+"px",t.style.overflow="hidden",t.style.position="relative",t.style.padding="0",t.style.margin="0",e.innerHTML="",e.appendChild(t),t}"css3"==f?p=b(e):"canvas"==f?r=E(e):"webgl"==f&&(v=function(e){var t=function(e,t,n){var i=e.createShader(t);e.shaderSource(i,n),e.compileShader(i);var r=e.getShaderParameter(i,e.COMPILE_STATUS);if(r)return i;e.deleteShader(i)},n=E(e),i=n.getContext("webgl");i.enable(i.BLEND),i.clearColor(0,0,0,0),i.blendFunc(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA);var r=t(i,i.VERTEX_SHADER,"attribute vec2 a_position;attribute vec2 a_texcoord;uniform vec2 u_resolution;varying vec2 v_texcoord;void main() {vec2 zeroToOne = a_position / u_resolution;vec2 zeroToTwo = zeroToOne * 2.0;vec2 clipSpace = zeroToTwo - 1.0;gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);v_texcoord = a_texcoord;}"),o=t(i,i.FRAGMENT_SHADER,"precision mediump float;varying vec2 v_texcoord;uniform sampler2D u_texture;void main() {gl_FragColor = texture2D(u_texture, v_texcoord);}"),l=function(e,t,n){var i=e.createProgram();if(e.attachShader(i,t),e.attachShader(i,n),e.linkProgram(i),e.getProgramParameter(i,e.LINK_STATUS))return i;e.deleteProgram(i)}(i,r,o);i.useProgram(l);var a=i.getAttribLocation(l,"a_position"),c=i.getAttribLocation(l,"a_texcoord"),s=i.getUniformLocation(l,"u_resolution");i.viewport(0,0,e.clientWidth,e.clientHeight),i.uniform2f(s,e.clientWidth,e.clientHeight);var u=i.createBuffer();return i.bindBuffer(i.ARRAY_BUFFER,u),i.enableVertexAttribArray(c),i.vertexAttribPointer(c,2,i.FLOAT,!1,0,0),i.bufferData(i.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),i.STATIC_DRAW),{canvas:n,positionAttributeLocation:a,resolutionUniformLocation:s,webglContext:i}}(e)),setInterval(function(){y==e.clientWidth&&u==e.clientHeight||(y=e.clientWidth,u=e.clientHeight,"css3"==f?(p.style.width=y+"px",p.style.height=u+"px"):"canvas"==f?(r.style.width=y+"px",r.style.height=u+"px",r.width=y,r.height=u):"webgl"==f&&(v.canvas.style.width=y+"px",v.canvas.style.height=u+"px",v.canvas.width=y,v.canvas.height=u,v.webglContext.viewport(0,0,y,u),v.webglContext.uniform2f(v.resolutionUniformLocation,y,u)))},100),this.addBulletScreen=function(t){if((t=d(t,{})).uuid=d(""),t.text=d(t.text,"Empty"),t.boxColor=d(t.boxColor,null),t.speed=d(t.speed,.15),t.size=d(t.size,19),t.color=d(t.color,null),t.borderColor=d(t.borderColor,null),t.type=d(t.type,0),t.startTime=d(t.startTime,h.clock()),t.residenceTime=d(t.endTime,5e3),t.canDiscard=d(t.canDiscard,!0),t.type<=3){var e=a.getLength();a.forEach(function(e){if(t.startTime>e.startTime)return{add:{addToUp:!0,element:t},stop:!0}},!0),e==a.getLength()&&a.push(t,!1)}},this.play=function(){n||(t||(t=(new Date).getTime()),o&&(t+=h.clock()-o),n=!(i=null),requestAnimationFrame(m))},this.pause=function(){n&&(o=h.clock(),n=!1)},this.cleanBulletScreenList=function(){a.clean()},this.cleanBulletScreenListOnScreen=function(){g.clean(),p&&(p.innerHTML="")},this.stop=function(){n&&this.pause(),o=0,t=null,this.cleanBulletScreenList(),this.cleanBulletScreenListOnScreen(),"css3"===f?p=b(e):"canvas"!==f&&"webgl"!==f||(r=E(e))},this.hide=function(){l=!0,r?r.style.visibility="hidden":p.style.visibility="hidden"},this.show=function(){l=!1,r?r.style.visibility="visible":p.style.visibility="visible"},this.getVisibility=function(){return!l},this.getPlayState=function(){return n},this.getDebugInfo=function(){return{time:n?h.clock():o,bulletScreensOnScreenCount:g.getLength(),bulletScreensCount:a.getLength(),delay:x,delayBulletScreensCount:c,fps:n?parseInt(1e3*s):0}},this.getVersion=function(){return{version:B.VERSION,buildDate:B.BUILE_DATE}}}},{"./linkedList":3,"./version":4}],2:[function(e,t,n){"use strict";var i=e("./BulletScreenEngine");window.BulletScreenEngine=i.BulletScreenEngine},{"./BulletScreenEngine":1}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.LinkedList=void 0;n.LinkedList=function(){var o=function(e){this.element=e,this.next=null,this.previous=null},l=new o(null),a=new o(null),c=0;(l.next=a).previous=l,this.getLength=function(e){return c},this.push=function(e,t){var n=new o(e);t?(n.next=l.next,(n.previous=l).next=l.next.previous=n):(n.previous=a.previous,(n.next=a).previous=a.previous.next=n),c++},this.pop=function(e,t){var n;return t?(n=l.next,l.next!=a&&e&&((n.next.previous=l).next=n.next)):(n=a.previous,a.previous!=l&&e&&((n.previous.next=a).previous=n.previous)),e&&c--,n.element},this.clean=function(){l=new o(null),a=new o(null),(l.next=a).previous=l,c=0},this.forEach=function(e,t){for(var n=t?l:a;t?(n=n.next)!=a:(n=n.previous)!=l;){var i=e(n.element);if(i){if(i.add){var r=new o(i.add.element);i.add.addToUp?(r.previous=n.previous,(r.next=n).previous.next=r,n.previous=r):(r.previous=n,r.next=n.next,n.next.previous=r,n.next=r),c++}if(i.remove&&(n.previous.next=n.next,n.next.previous=n.previous,c--),i.stop)return}}}}},{}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.BUILE_DATE=n.VERSION=void 0;n.VERSION="1.1";n.BUILE_DATE="Fri, 04 Jan 2019 13:45:41 GMT"},{}]},{},[2,1]);